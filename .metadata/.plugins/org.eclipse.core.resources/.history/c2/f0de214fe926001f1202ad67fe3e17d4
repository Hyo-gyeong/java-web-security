// 컴퓨터학과, 20190975, 신효경
package main;

import java.util.Scanner;

import enums.Message;
import hospital.Hospital;
import hospital.HospitalMain;
import key_manager.keyManagerMain;
import research_center.ResearchCenter;
import research_center.ResearchCenterMain;

public class Main {
	private static final String PW = "20190975";//암호화해서 파일로 저장 후 파일의 내용을 읽어서 비교하는 코드 추가
	public static void main(String[] args) throws Exception {
		Scanner sc = new Scanner(System.in);
		System.out.println(Message.INIT_OBJECT_AND_KEY.getMessage());
		
		Hospital hospital = new Hospital();
		System.out.println(Message.MEDICAL_OBJECT_CREATED.getMessage());
		
		ResearchCenter();
		System.out.println(Message.RESEARCH_OBJECT_CREATED.getMessage());
		
		System.out.println(Message.OBJECT_CREATED_SUCCESS.getMessage());
		
		keyManagerMain.createSaveAsymKeys();
		System.out.println(Message.KEY_CREATED_SUCCESS.getMessage());
		
		int i = 0;
		boolean ifContinue = false;
		do {
			System.out.print(Message.HOSPITAL_GREETING.getMessage());
			String inputPassword = sc.next();
			i++;
			if (i == 3) {
				System.out.println(Message.PW_ERROR_PG_TERMINATE.getMessage());
				sc.close();
				return;
			}
			if (checkPassword(inputPassword)){
				ifContinue = HospitalMain.run(hospital, sc);
				break;		
			}else {
				System.out.println(Message.PW_ERROR.getMessage());
				System.out.println(i+Message.PW_ERROR_WARNING.getMessage());
			}
		} while(i < 3);
		System.out.println("==============================================");
		i = 0;
		if (ifContinue == true) {
			do {
				System.out.print(Message.RESEARCH_CENTER_GREETING.getMessage());
				String inputPassword = sc.next();
				i++;
				if (i == 3) {
					System.out.println(Message.PW_ERROR_PG_TERMINATE.getMessage());
					sc.close();
					return;
				}if (checkPassword(inputPassword)){
					ResearchCenterMain.run(sc);
				}else {
					System.out.println(Message.PW_ERROR.getMessage());
					System.out.println(i+Message.PW_ERROR_WARNING.getMessage());
				}
				break;
			} while(i < 3);
		}
	}

	private static boolean checkPassword(String input) {
	    if (input.equals(PW)) {
	    	return true;
	    }else {
	    	return false;
	    }
	}
}
